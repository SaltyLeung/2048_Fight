require=function t(e,o,i){function n(r,a){if(!o[r]){if(!e[r]){var l="function"==typeof require&&require;if(!a&&l)return l(r,!0);if(s)return s(r,!0);var u=new Error("Cannot find module '"+r+"'");throw u.code="MODULE_NOT_FOUND",u}var m=o[r]={exports:{}};e[r][0].call(m.exports,function(t){var o=e[r][1][t];return n(o||t)},m,m.exports,t,e,o,i)}return o[r].exports}for(var s="function"==typeof require&&require,r=0;r<i.length;r++)n(i[r]);return n}({Define:[function(t,e,o){"use strict";cc._RF.push(e,"cfaa88Q3rRBWYCRWaRedb9B","Define"),cc._RF.pop()},{}],Game:[function(t,e,o){"use strict";cc._RF.push(e,"69f1aPXOdZHxphG59FSHvvc","Game");var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n=cc.Class({extends:cc.Component,properties:{gameOver:!1,slideCount:-1,isP2:!1,destroySpeed:2,timeOut:!0,vsController:{default:null,type:t("VSController")},squarePrefab:{default:null,type:cc.Prefab},positionList:{default:[],type:[cc.Node]},eatableList:{default:[],type:[cc.Boolean]},moveableList:{default:[],type:[cc.Node]}},onLoad:function(){for(var t=0;t<16;++t)this.positionList[t].number=0,this.moveableList[t]=null,this.eatableList[t]=!1;cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this)},start:function(){this.randomCreate()},update:function(t){},randomCreate:function(){if(1!=this.gameOver){for(var e=new Array,o=0;o<16;++o)0==this.positionList[o].number&&e.push(o);if(0!=e.length){var i=Math.floor(Math.random()*e.length),n=2*(1+Math.floor(2*Math.random())),s=cc.instantiate(this.squarePrefab);s.setPosition(this.positionList[e[i]].getPosition()),s.getComponent(t("Square")).number=n,s.getComponent(t("Square")).gameScript=this,this.node.addChild(s),s.getComponent(cc.Animation).play("2048Show"),this.positionList[e[i]].number=n,this.moveableList[e[i]]=s,console.log("----------");for(o=0;o<16;++o)null!=this.moveableList[o]&&console.log("moveableNum"+o+": "+this.moveableList[o].getPosition());for(o=0;o<16;++o)console.log("position"+o+": "+this.positionList[o].number)}else this.gameOver=!0}},moveDown:function(){for(var e=!1,o=0;o<4;++o)for(u=o;u<16;u+=4)if(null!=this.moveableList[u]){for(var i=[!1,!1,!1,!1],n=u,s=!1,r=u-4;r>=0;r-=4){if(0!=this.positionList[r].number){if(this.positionList[r].number==this.positionList[u].number&&0==i[Math.floor(r/4)]){e=!0,n=r,i[Math.floor(r/4)]=!0,this.moveableList[u].getComponent(t("Square")).toDestroyed=!0,s=!0;break}break}e=!0,n=r}this.moveableList[u].getComponent(t("Square")).tempTarget=n;var a=this.positionList[u].number;this.positionList[u].number=0,this.positionList[n].number=a,1==s&&(this.positionList[n].number*=2)}for(o=4;o<16;++o)null!=this.moveableList[o]&&this.moveableList[o].getComponent(t("Square")).move(this);for(o=0;o<16;++o)null!=this.moveableList[o]&&1==this.moveableList[o].getComponent(t("Square")).toDestroyed&&(this.moveableList[o].getComponent(cc.Animation).play("2048Fade"),this.moveableList[o]=null);for(var l=new Array,u=0;u<16;++u)l[u]=this.moveableList[u];for(u=0;u<16;++u)this.moveableList[u]=null;for(o=0;o<16;++o)null!=l[o]&&(this.moveableList[l[o].getComponent(t("Square")).tempTarget]=l[o]);for(o=0;o<16;++o)null!=this.moveableList[o]&&(this.moveableList[o].getComponent(t("Square")).number=this.positionList[o].number);return e},moveUp:function(){for(var e=!1,o=12;o<16;++o)for(u=o;u>=0;u-=4)if(null!=this.moveableList[u]){for(var i=[!1,!1,!1,!1],n=u,s=!1,r=u+4;r<16;r+=4){if(0!=this.positionList[r].number){if(this.positionList[r].number==this.positionList[u].number&&0==i[Math.floor(r/4)]){e=!0,n=r,i[Math.floor(r/4)]=!0,this.moveableList[u].getComponent(t("Square")).toDestroyed=!0,s=!0;break}break}e=!0,n=r}this.moveableList[u].getComponent(t("Square")).tempTarget=n;var a=this.positionList[u].number;this.positionList[u].number=0,this.positionList[n].number=a,1==s&&(this.positionList[n].number*=2)}for(o=0;o<16;++o)null!=this.moveableList[o]&&this.moveableList[o].getComponent(t("Square")).move(this);for(o=0;o<16;++o)null!=this.moveableList[o]&&1==this.moveableList[o].getComponent(t("Square")).toDestroyed&&(this.moveableList[o].getComponent(cc.Animation).play("2048Fade"),this.moveableList[o]=null);for(var l=new Array,u=0;u<16;++u)l[u]=this.moveableList[u];for(u=0;u<16;++u)this.moveableList[u]=null;for(o=0;o<16;++o)null!=l[o]&&(this.moveableList[l[o].getComponent(t("Square")).tempTarget]=l[o]);for(o=0;o<16;++o)null!=this.moveableList[o]&&(this.moveableList[o].getComponent(t("Square")).number=this.positionList[o].number);return e},moveLeft:function(){for(var e=!1,o=0;o<=12;o+=4)for(m=o;m<o+4;++m)if(null!=this.moveableList[m]){for(var n=[!1,!1,!1,!1],s=m,r=!1,a=m-1;a>=o;--a){if(0!=this.positionList[a].number){if(this.positionList[a].number==this.positionList[m].number&&0==n[Math.floor(a/4)]){e=!0,s=a,n[Math.floor(a/4)]=!0,this.moveableList[m].getComponent(t("Square")).toDestroyed=!0,r=!0;break}break}e=!0,s=a}this.moveableList[m].getComponent(t("Square")).tempTarget=s;var l=this.positionList[m].number;this.positionList[m].number=0,this.positionList[s].number=l,1==r&&(this.positionList[s].number*=2)}for(o=0;o<16;++o)null!=this.moveableList[o]&&this.moveableList[o].getComponent(t("Square")).move(this);for(o=0;o<16;++o)null!=this.moveableList[o]&&1==this.moveableList[o].getComponent(t("Square")).toDestroyed&&(this.moveableList[o].getComponent(cc.Animation).play("2048Fade"),this.moveableList[o]=null);for(var u=new Array,m=0;m<16;++m)u[m]=this.moveableList[m];for(m=0;m<16;++m)this.moveableList[m]=null;for(o=0;o<16;++o)null!=u[o]&&(console.log("TYpe"+i(u[o].getComponent(t("Square")).tempTarget)),this.moveableList[u[o].getComponent(t("Square")).tempTarget]=u[o]);for(o=0;o<16;++o)null!=this.moveableList[o]&&(this.moveableList[o].getComponent(t("Square")).number=this.positionList[o].number);return e},moveRight:function(){for(var e=!1,o=3;o<=15;o+=4)for(m=o;m>o-4;--m)if(null!=this.moveableList[m]){for(var n=[!1,!1,!1,!1],s=m,r=!1,a=m+1;a<=o;++a){if(0!=this.positionList[a].number){if(this.positionList[a].number==this.positionList[m].number&&0==n[Math.floor(a/4)]){e=!0,s=a,n[Math.floor(a/4)]=!0,this.moveableList[m].getComponent(t("Square")).toDestroyed=!0,r=!0;break}break}e=!0,s=a}this.moveableList[m].getComponent(t("Square")).tempTarget=s;var l=this.positionList[m].number;this.positionList[m].number=0,this.positionList[s].number=l,1==r&&(this.positionList[s].number*=2)}for(o=0;o<16;++o)null!=this.moveableList[o]&&this.moveableList[o].getComponent(t("Square")).move(this);for(o=0;o<16;++o)null!=this.moveableList[o]&&1==this.moveableList[o].getComponent(t("Square")).toDestroyed&&(this.moveableList[o].getComponent(cc.Animation).play("2048Fade"),this.moveableList[o]=null);for(var u=new Array,m=0;m<16;++m)u[m]=this.moveableList[m];for(m=0;m<16;++m)this.moveableList[m]=null;for(o=0;o<16;++o)null!=u[o]&&(console.log("TYpe"+i(u[o].getComponent(t("Square")).tempTarget)),this.moveableList[u[o].getComponent(t("Square")).tempTarget]=u[o]);for(o=0;o<16;++o)null!=this.moveableList[o]&&(this.moveableList[o].getComponent(t("Square")).number=this.positionList[o].number);return e},onKeyDown:function(t){if(0!=this.timeOut)switch(t.keyCode){case cc.KEY.s:if(0==this.moveDown())return;this.timeOut=!1,this.scheduleOnce(function(){this.timeOut=!0,this.randomCreate(),console.log("sca")},.5);break;case cc.KEY.w:if(0==this.moveUp())return;this.timeOut=!1,this.scheduleOnce(function(){this.timeOut=!0,this.randomCreate(),console.log("sca")},.5);break;case cc.KEY.d:if(0==this.moveRight())return;this.timeOut=!1,this.scheduleOnce(function(){this.timeOut=!0,this.randomCreate(),console.log("sca")},.5);break;case cc.KEY.a:if(0==this.moveLeft())return;this.timeOut=!1,this.scheduleOnce(function(){this.timeOut=!0,this.randomCreate(),console.log("sca")},.5)}},onSlide:function(t){if(0==this.timeOut)return!1;switch(t){case"down":if(0==this.moveDown())return!1;this.timeOut=!1,this.scheduleOnce(function(){this.timeOut=!0,this.randomCreate()},.8);break;case"up":if(0==this.moveUp())return!1;this.timeOut=!1,this.scheduleOnce(function(){this.timeOut=!0,this.randomCreate()},.8);break;case"right":if(0==this.moveRight())return!1;this.timeOut=!1,this.scheduleOnce(function(){this.timeOut=!0,this.randomCreate()},.8);break;case"left":if(0==this.moveLeft())return!1;this.timeOut=!1,this.scheduleOnce(function(){this.timeOut=!0,this.randomCreate()},.8)}return!0},gameOver:function(){}});e.exports=n,cc._RF.pop()},{Square:"Square",VSController:"VSController"}],HelloWorld:[function(t,e,o){"use strict";cc._RF.push(e,"280c3rsZJJKnZ9RqbALVwtK","HelloWorld"),cc.Class({extends:cc.Component,properties:{label:{default:null,type:cc.Label},text:"Hello, World!"},onLoad:function(){this.label.string=this.text},update:function(t){}}),cc._RF.pop()},{}],SlideControl:[function(t,e,o){"use strict";cc._RF.push(e,"258c5409KZKUpwQRZ/XFZu4","SlideControl"),cc.Class({extends:cc.Component,properties:{vsController:{default:null,type:t("VSController")},gameScript_1:{default:null,type:t("Game")},gameScript_2:{default:null,type:t("Game")}},onLoad:function(){},start:function(){var t=this;this.node.on(cc.Node.EventType.TOUCH_START,function(e){this.node.on(cc.Node.EventType.TOUCH_MOVE,function(e){var o=e.getDelta();Math.abs(o.x)>=Math.abs(o.y)?o.x>0?(t.gameScript_1.onSlide("right"),t.gameScript_2.onSlide("right")):(t.gameScript_1.onSlide("left"),t.gameScript_2.onSlide("left")):o.y>0?(t.gameScript_1.onSlide("up"),t.gameScript_2.onSlide("up")):(t.gameScript_1.onSlide("down"),t.gameScript_2.onSlide("down")),t.node.off},this)},this)}}),cc._RF.pop()},{Game:"Game",VSController:"VSController"}],Square:[function(t,e,o){"use strict";cc._RF.push(e,"cada9u3Ed5LwZx/wkRHfkFJ","Square");var i=cc.Class({extends:cc.Component,properties:{number:0,numLabel:{default:null,type:cc.Label},gameNode:{default:null,type:cc.Node},gameScript:{default:null,type:t("Game")},gameScriptP2:{default:null,type:t("Game")},tempTarget:0,toDouble:!1,toDestroyed:!1,moveSpeed:.4},move:function(t){var e=cc.moveTo(this.moveSpeed,t.positionList[this.tempTarget].getPosition());this.node.runAction(e)},onLoad:function(){this.numLabel=this.node.getChildByName("Number"),this.gameScript=cc.find("Game").getComponent("Game"),this.gameScriptP2=cc.find("GameP2").getComponent("Game")},start:function(){},update:function(t){this.numLabel.getComponent(cc.Label).string=this.number.toString()}});e.exports=i,cc._RF.pop()},{Game:"Game"}],VSController:[function(t,e,o){"use strict";cc._RF.push(e,"7e928F/vw9KB6TQE+u5s1Rs","VSController");var i=cc.Class({extends:cc.Component,properties:{isDown:!0,sliceUp:{default:null,type:cc.Node},sliceDown:{default:null,type:cc.Node},buttonUp:{default:null,type:cc.Node},buttonDown:{default:null,type:cc.Node},blockWhite:{default:null,type:cc.Node},blockDark:{default:null,type:cc.Node}},start:function(){},switchSide:function(){1==this.isDown?(console.log("switchA"),this.sliceDown.active=!1,this.buttonUp.active=!1,this.blockDark.active=!0,this.isDown=!1):(console.log("switchB"),this.sliceUp.active=!1,this.buttonDown.active=!1,this.blockWhite.active=!0,this.isDown=!0)},activeDark:function(){this.sliceUp.active=!0,this.buttonDown.active=!0,this.blockDark.active=!1},activeWhite:function(){this.buttonUp.active=!0,this.sliceDown.active=!0,this.blockWhite.active=!1}});e.exports=i,cc._RF.pop()},{}]},{},["Define","Game","HelloWorld","SlideControl","Square","VSController"]);