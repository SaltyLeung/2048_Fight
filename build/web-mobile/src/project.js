require=function t(e,i,o){function n(r,a){if(!i[r]){if(!e[r]){var l="function"==typeof require&&require;if(!a&&l)return l(r,!0);if(s)return s(r,!0);var u=new Error("Cannot find module '"+r+"'");throw u.code="MODULE_NOT_FOUND",u}var c=i[r]={exports:{}};e[r][0].call(c.exports,function(t){var i=e[r][1][t];return n(i||t)},c,c.exports,t,e,i,o)}return i[r].exports}for(var s="function"==typeof require&&require,r=0;r<o.length;r++)n(o[r]);return n}({Define:[function(t,e,i){"use strict";cc._RF.push(e,"cfaa88Q3rRBWYCRWaRedb9B","Define"),cc._RF.pop()},{}],Game:[function(t,e,i){"use strict";cc._RF.push(e,"69f1aPXOdZHxphG59FSHvvc","Game");var o=cc.Class({extends:cc.Component,properties:{gameOver:!1,win:!1,slideCount:-1,isP2:!1,destroySpeed:2,timeOut:!0,vsController:{default:null,type:t("VSController")},squarePrefab:{default:null,type:cc.Prefab},positionList:{default:[],type:[cc.Node]},eatableList:{default:[],type:[cc.Boolean]},moveableList:{default:[],type:[cc.Node]}},onLoad:function(){for(var t=0;t<16;++t)this.positionList[t].number=0,this.moveableList[t]=null,this.eatableList[t]=!1;cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this)},start:function(){this.randomCreate()},update:function(t){},randomCreate:function(){if(1!=this.gameOver){for(var e=new Array,i=0;i<16;++i){if(0==this.positionList[i].number&&e.push(i),this.positionList[i].number>=2048&&0==this.isP2)return void this.vsController.p1Win();if(this.positionList[i].number>=2048&&1==this.isP2)return void this.vsController.p2Win()}var o=Math.floor(Math.random()*e.length),n=2*(1+Math.floor(2*Math.random())),s=cc.instantiate(this.squarePrefab);s.setPosition(this.positionList[e[o]].getPosition()),s.getComponent(t("Square")).number=n,s.getComponent(t("Square")).gameScript=this,this.node.addChild(s),s.getComponent(cc.Animation).play("2048Show"),this.positionList[e[o]].number=n,this.moveableList[e[o]]=s,console.log("----------"),console.log(this.gameOver),1==e.length&&(this.checkAlive()?console.log("Game Continue"):(this.gameOver=!0,console.log("GameOver")))}},moveDown:function(){for(var e=!1,i=0;i<4;++i)for(u=i;u<16;u+=4)if(null!=this.moveableList[u]){for(var o=[!1,!1,!1,!1],n=u,s=!1,r=u-4;r>=0;r-=4){if(0!=this.positionList[r].number){if(this.positionList[r].number==this.positionList[u].number&&0==o[Math.floor(r/4)]){e=!0,n=r,o[Math.floor(r/4)]=!0,this.moveableList[u].getComponent(t("Square")).toDestroyed=!0,s=!0;break}break}e=!0,n=r}this.moveableList[u].getComponent(t("Square")).tempTarget=n;var a=this.positionList[u].number;this.positionList[u].number=0,this.positionList[n].number=a,1==s&&(this.positionList[n].number*=2)}for(i=4;i<16;++i)null!=this.moveableList[i]&&this.moveableList[i].getComponent(t("Square")).move(this);for(i=0;i<16;++i)null!=this.moveableList[i]&&1==this.moveableList[i].getComponent(t("Square")).toDestroyed&&(this.moveableList[i].getComponent(cc.Animation).play("2048Fade"),this.moveableList[i]=null);for(var l=new Array,u=0;u<16;++u)l[u]=this.moveableList[u];for(u=0;u<16;++u)this.moveableList[u]=null;for(i=0;i<16;++i)null!=l[i]&&(this.moveableList[l[i].getComponent(t("Square")).tempTarget]=l[i]);for(i=0;i<16;++i)null!=this.moveableList[i]&&(this.moveableList[i].getComponent(t("Square")).number=this.positionList[i].number);return e},moveUp:function(){for(var e=!1,i=12;i<16;++i)for(u=i;u>=0;u-=4)if(null!=this.moveableList[u]){for(var o=[!1,!1,!1,!1],n=u,s=!1,r=u+4;r<16;r+=4){if(0!=this.positionList[r].number){if(this.positionList[r].number==this.positionList[u].number&&0==o[Math.floor(r/4)]){e=!0,n=r,o[Math.floor(r/4)]=!0,this.moveableList[u].getComponent(t("Square")).toDestroyed=!0,s=!0;break}break}e=!0,n=r}this.moveableList[u].getComponent(t("Square")).tempTarget=n;var a=this.positionList[u].number;this.positionList[u].number=0,this.positionList[n].number=a,1==s&&(this.positionList[n].number*=2)}for(i=0;i<16;++i)null!=this.moveableList[i]&&this.moveableList[i].getComponent(t("Square")).move(this);for(i=0;i<16;++i)null!=this.moveableList[i]&&1==this.moveableList[i].getComponent(t("Square")).toDestroyed&&(this.moveableList[i].getComponent(cc.Animation).play("2048Fade"),this.moveableList[i]=null);for(var l=new Array,u=0;u<16;++u)l[u]=this.moveableList[u];for(u=0;u<16;++u)this.moveableList[u]=null;for(i=0;i<16;++i)null!=l[i]&&(this.moveableList[l[i].getComponent(t("Square")).tempTarget]=l[i]);for(i=0;i<16;++i)null!=this.moveableList[i]&&(this.moveableList[i].getComponent(t("Square")).number=this.positionList[i].number);return e},moveLeft:function(){for(var e=!1,i=0;i<=12;i+=4)for(u=i;u<i+4;++u)if(null!=this.moveableList[u]){for(var o=[!1,!1,!1,!1],n=u,s=!1,r=u-1;r>=i;--r){if(0!=this.positionList[r].number){if(this.positionList[r].number==this.positionList[u].number&&0==o[Math.floor(r/4)]){e=!0,n=r,o[Math.floor(r/4)]=!0,this.moveableList[u].getComponent(t("Square")).toDestroyed=!0,s=!0;break}break}e=!0,n=r}this.moveableList[u].getComponent(t("Square")).tempTarget=n;var a=this.positionList[u].number;this.positionList[u].number=0,this.positionList[n].number=a,1==s&&(this.positionList[n].number*=2)}for(i=0;i<16;++i)null!=this.moveableList[i]&&this.moveableList[i].getComponent(t("Square")).move(this);for(i=0;i<16;++i)null!=this.moveableList[i]&&1==this.moveableList[i].getComponent(t("Square")).toDestroyed&&(this.moveableList[i].getComponent(cc.Animation).play("2048Fade"),this.moveableList[i]=null);for(var l=new Array,u=0;u<16;++u)l[u]=this.moveableList[u];for(u=0;u<16;++u)this.moveableList[u]=null;for(i=0;i<16;++i)null!=l[i]&&(this.moveableList[l[i].getComponent(t("Square")).tempTarget]=l[i]);for(i=0;i<16;++i)null!=this.moveableList[i]&&(this.moveableList[i].getComponent(t("Square")).number=this.positionList[i].number);return e},moveRight:function(){for(var e=!1,i=3;i<=15;i+=4)for(u=i;u>i-4;--u)if(null!=this.moveableList[u]){for(var o=[!1,!1,!1,!1],n=u,s=!1,r=u+1;r<=i;++r){if(0!=this.positionList[r].number){if(this.positionList[r].number==this.positionList[u].number&&0==o[Math.floor(r/4)]){e=!0,n=r,o[Math.floor(r/4)]=!0,this.moveableList[u].getComponent(t("Square")).toDestroyed=!0,s=!0;break}break}e=!0,n=r}this.moveableList[u].getComponent(t("Square")).tempTarget=n;var a=this.positionList[u].number;this.positionList[u].number=0,this.positionList[n].number=a,1==s&&(this.positionList[n].number*=2)}for(i=0;i<16;++i)null!=this.moveableList[i]&&this.moveableList[i].getComponent(t("Square")).move(this);for(i=0;i<16;++i)null!=this.moveableList[i]&&1==this.moveableList[i].getComponent(t("Square")).toDestroyed&&(this.moveableList[i].getComponent(cc.Animation).play("2048Fade"),this.moveableList[i]=null);for(var l=new Array,u=0;u<16;++u)l[u]=this.moveableList[u];for(u=0;u<16;++u)this.moveableList[u]=null;for(i=0;i<16;++i)null!=l[i]&&(this.moveableList[l[i].getComponent(t("Square")).tempTarget]=l[i]);for(i=0;i<16;++i)null!=this.moveableList[i]&&(this.moveableList[i].getComponent(t("Square")).number=this.positionList[i].number);return e},onKeyDown:function(t){if(0!=this.timeOut)switch(t.keyCode){case cc.KEY.s:if(0==this.moveDown())return;this.timeOut=!1,this.scheduleOnce(function(){this.timeOut=!0,this.randomCreate(),console.log("sca")},.5);break;case cc.KEY.w:if(0==this.moveUp())return;this.timeOut=!1,this.scheduleOnce(function(){this.timeOut=!0,this.randomCreate(),console.log("sca")},.5);break;case cc.KEY.d:if(0==this.moveRight())return;this.timeOut=!1,this.scheduleOnce(function(){this.timeOut=!0,this.randomCreate(),console.log("sca")},.5);break;case cc.KEY.a:if(0==this.moveLeft())return;this.timeOut=!1,this.scheduleOnce(function(){this.timeOut=!0,this.randomCreate(),console.log("sca")},.5)}},onSlide:function(t){if(0==this.timeOut)return!1;switch(t){case"down":if(0==this.moveDown())return!1;this.timeOut=!1,this.scheduleOnce(function(){this.timeOut=!0,this.randomCreate()},.8);break;case"up":if(0==this.moveUp())return!1;this.timeOut=!1,this.scheduleOnce(function(){this.timeOut=!0,this.randomCreate()},.8);break;case"right":if(0==this.moveRight())return!1;this.timeOut=!1,this.scheduleOnce(function(){this.timeOut=!0,this.randomCreate()},.8);break;case"left":if(0==this.moveLeft())return!1;this.timeOut=!1,this.scheduleOnce(function(){this.timeOut=!0,this.randomCreate()},.8)}return!0},checkAlive:function(){for(t=0;t<16;++t)if(t%4!=3){if(void 0!=this.positionList[t+1]&&this.positionList[t+1].number==this.positionList[t].number)return!0;if(void 0!=this.positionList[t+4]&&this.positionList[t+4].number==this.positionList[t].number)return!0}for(var t=3;t<=11;t+=4)if(this.positionList[t].number==this.positionList[t+4].number)return!0;return!1}});e.exports=o,cc._RF.pop()},{Square:"Square",VSController:"VSController"}],HelloWorld:[function(t,e,i){"use strict";cc._RF.push(e,"280c3rsZJJKnZ9RqbALVwtK","HelloWorld"),cc.Class({extends:cc.Component,properties:{label:{default:null,type:cc.Label},text:"Hello, World!"},onLoad:function(){this.label.string=this.text},update:function(t){}}),cc._RF.pop()},{}],SlideControl:[function(t,e,i){"use strict";cc._RF.push(e,"258c5409KZKUpwQRZ/XFZu4","SlideControl"),cc.Class({extends:cc.Component,properties:{vsController:{default:null,type:t("VSController")},gameScript_1:{default:null,type:t("Game")},gameScript_2:{default:null,type:t("Game")},touchStartLocation:{default:null,type:cc.v2},minMoveDisSqr:100},onLoad:function(){},start:function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this)},onTouchStart:function(t){this.touchStartLocation=t.touch.getLocation(),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this)},onTouchMove:function(t){var e=new cc.v2,i=new cc.v2(t.touch.getLocationX(),t.touch.getLocationY());i.sub(this.touchStartLocation,e),e.magSqr()>this.minMoveDisSqr&&(Math.abs(e.x)>Math.abs(e.y)?e.x>0?(this.gameScript_1.onSlide("right"),this.gameScript_2.onSlide("right"),this.touchStartLocation=i):(this.gameScript_1.onSlide("left"),this.gameScript_2.onSlide("left")):e.y>0?(this.gameScript_1.onSlide("up"),this.gameScript_2.onSlide("up"),this.touchStartLocation=i):(this.gameScript_1.onSlide("down"),this.gameScript_2.onSlide("down"),this.touchStartLocation=i))},onTouchEnd:function(){this.node.off(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this)}}),cc._RF.pop()},{Game:"Game",VSController:"VSController"}],Square:[function(t,e,i){"use strict";cc._RF.push(e,"cada9u3Ed5LwZx/wkRHfkFJ","Square");var o=cc.Class({extends:cc.Component,properties:{number:0,numLabel:{default:null,type:cc.Label},gameNode:{default:null,type:cc.Node},gameScript:{default:null,type:t("Game")},gameScriptP2:{default:null,type:t("Game")},tempTarget:0,toDouble:!1,toDestroyed:!1,moveSpeed:.4},move:function(t){var e=cc.moveTo(this.moveSpeed,t.positionList[this.tempTarget].getPosition());this.node.runAction(e)},onLoad:function(){this.numLabel=this.node.getChildByName("Number"),this.gameScript=cc.find("Game").getComponent("Game"),this.gameScriptP2=cc.find("GameP2").getComponent("Game")},start:function(){},update:function(t){this.numLabel.getComponent(cc.Label).string=this.number.toString()}});e.exports=o,cc._RF.pop()},{Game:"Game"}],VSController:[function(t,e,i){"use strict";cc._RF.push(e,"7e928F/vw9KB6TQE+u5s1Rs","VSController");var o=cc.Class({extends:cc.Component,properties:function(){return{isDown:!0,sliceUp:{default:null,type:cc.Node},sliceDown:{default:null,type:cc.Node},buttonUp:{default:null,type:cc.Node},buttonDown:{default:null,type:cc.Node},blockWhite:{default:null,type:cc.Node},blockDark:{default:null,type:cc.Node},restart:{default:null,type:cc.Node},game1:{default:null,type:cc.Node},game2:{default:null,type:cc.Node},gameP1:{default:null,type:t("Game")},gameP2:{default:null,type:t("Game")},p1Label:{default:null,type:cc.Label},p2Label:{default:null,type:cc.Label}}},start:function(){this.gameP1=this.game1.getComponent(t("Game")),this.gameP2=this.game2.getComponent(t("Game"))},switchSide:function(){1==this.isDown?(console.log("switchA"),this.sliceDown.active=!1,this.buttonUp.active=!1,this.blockDark.active=!0,this.isDown=!1):(console.log("switchB"),this.sliceUp.active=!1,this.buttonDown.active=!1,this.blockWhite.active=!0,this.isDown=!0)},activeDark:function(){this.sliceUp.active=!0,this.buttonDown.active=!0,this.blockDark.active=!1},activeWhite:function(){this.buttonUp.active=!0,this.sliceDown.active=!0,this.blockWhite.active=!1},p1Win:function(){this.buttonUp.active=!1,this.buttonDown.active=!1,this.sliceDown.active=!1,this.sliceUp.active=!1,this.p2Label.string="Black Lose!",this.p1Label.string="White Win!",this.restart.active=!0},p2Win:function(){this.buttonUp.active=!1,this.buttonDown.active=!1,this.sliceDown.active=!1,this.sliceUp.active=!1,this.p2Label.string="Black Win!",this.p1Label.string="White Lose!",this.restart.active=!0},openP2:function(){0==this.gameP2.gameOver?this.p2Win():this.p1Win()},openP1:function(){0==this.gameP1.gameOver?this.p1Win():this.p2Win()},reloadScene:function(){cc.director.loadScene("Game")}});e.exports=o,cc._RF.pop()},{Game:"Game"}]},{},["Define","Game","HelloWorld","SlideControl","Square","VSController"]);