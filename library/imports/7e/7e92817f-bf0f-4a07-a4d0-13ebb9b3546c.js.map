{"version":3,"sources":["..\\..\\..\\..\\assets\\Script/assets\\Script\\VSController.js"],"names":["VSController","cc","Class","extends","Component","properties","isDown","sliceUp","default","type","Node","sliceDown","buttonUp","buttonDown","blockWhite","blockDark","restart","game1","game2","gameP1","require","gameP2","p1Label","Label","p2Label","p1Bomb","p2Bomb","stepCount","timeCount","changeTime","countDownLabel1","countDownLabel2","start","getComponent","manager","director","getCollisionManager","enabled","enabledDebugDraw","enabledDrawBoundingBox","schedule","timeInterval","switchSide","console","log","active","cancel","unschedule","activeDark","activeWhite","p1Win","string","p2Win","openP2","gameOver","openP1","reloadScene","loadScene","destroyIndex","index","positionList","number","moveableList","destroy","bombIsOK","update","dt","clearStepCount","module","exports"],"mappings":"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","file":"VSController.js","sourceRoot":"..\\..\\..\\..\\assets\\Script","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/class.html\r\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/class/index.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/reference/attributes/index.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/life-cycle-callbacks/index.html\r\n\r\nvar VSController = cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties:()=>( {\r\n        isDown: true,\r\n        sliceUp:{\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n        sliceDown:{\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n        buttonUp:{\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n        buttonDown:{\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n        blockWhite:{\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n        blockDark:{\r\n            default: null,\r\n            type: cc.Node\r\n        }, \r\n        restart: {\r\n            default:null,\r\n            type:cc.Node\r\n        },\r\n        game1: {\r\n            default: null,\r\n            type:cc.Node\r\n        },\r\n        game2: {\r\n            default: null,\r\n            type:cc.Node\r\n        },\r\n        gameP1: {\r\n            default: null,\r\n            type: require(\"Game\")\r\n        },\r\n        gameP2: {\r\n            default: null,\r\n            type: require(\"Game\")\r\n        },\r\n        p1Label: {\r\n            default: null,\r\n            type: cc.Label\r\n        },\r\n        p2Label: {\r\n            default: null,\r\n            type: cc.Label\r\n        },\r\n        p1Bomb:{\r\n            default:null,\r\n            type: require(\"BombButton\")\r\n        },\r\n        p2Bomb:{\r\n            default:null,\r\n            type: require(\"BombButton\")\r\n        },\r\n        stepCount:0,\r\n        timeCount:5,\r\n        changeTime:5,\r\n        countDownLabel1:{\r\n            default:null,\r\n            type:cc.Label\r\n        },\r\n        countDownLabel2:{\r\n            default:null,\r\n            type:cc.Label\r\n        }\r\n        //stepCount:0\r\n        // foo: {\r\n        //     // ATTRIBUTES:\r\n        //     default: null,        // The default value will be used only when the component attaching\r\n        //                           // to a node for the first time\r\n        //     type: cc.SpriteFrame, // optional, default is typeof default\r\n        //     serializable: true,   // optional, default is true\r\n        // },\r\n        // bar: {\r\n        //     get () {\r\n        //         return this._bar;\r\n        //     },\r\n        //     set (value) {\r\n        //         this._bar = value;\r\n        //     }\r\n        // },\r\n    }),\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {},\r\n\r\n    start () {\r\n        this.timeCount = this.changeTime;\r\n        this.gameP1 = this.game1.getComponent((require(\"Game\")));\r\n        this.gameP2 = this.game2.getComponent((require(\"Game\")));\r\n        var manager = cc.director.getCollisionManager();\r\n        manager.enabled = true;\r\n        manager.enabledDebugDraw = false;\r\n        manager.enabledDrawBoundingBox = false;\r\n        this.schedule(this.timeInterval,1,this.changeTime);\r\n    },\r\n    switchSide() {\r\n      if(this.isDown == true) {\r\n        console.log(\"switchA\");\r\n          this.sliceDown.active = false;\r\n          this.buttonUp.active = false;\r\n          this.blockDark.active = true;\r\n          this.p1Bomb.cancel(null);\r\n          this.p2Bomb.cancel(null);\r\n          this.isDown = false;\r\n          //this.timeCount = this.changeTime;\r\n          this.unschedule(this.timeInterval);\r\n      } else {\r\n        console.log(\"switchB\");\r\n        this.sliceUp.active = false;\r\n        this.buttonDown.active = false;\r\n        this.blockWhite.active = true;\r\n        this.isDown = true;\r\n        this.p1Bomb.cancel(null);\r\n        this.p2Bomb.cancel(null);\r\n        //this.timeCount = this.changeTime;\r\n        this.unschedule(this.timeInterval);\r\n      }\r\n    },\r\n    activeDark() {\r\n        this.sliceUp.active = true;\r\n        this.buttonDown.active = true;\r\n        this.blockDark.active = false;\r\n        this.timeCount = this.changeTime;\r\n        this.schedule(this.timeInterval,1,this.changeTime);\r\n    },\r\n    activeWhite() {\r\n        this.buttonUp.active = true;\r\n        this.sliceDown.active = true;\r\n        this.blockWhite.active = false;\r\n        this.timeCount = this.changeTime;\r\n        this.schedule(this.timeInterval,1,this.changeTime);\r\n    },\r\n    p1Win() {\r\n        //this.gameP2.node.active = false;\r\n        //this.gameP1.dode.active = false;\r\n        this.buttonUp.active = false;\r\n        this.buttonDown.active = false;\r\n        this.sliceDown.active = false;\r\n        this.sliceUp.active = false;\r\n        this.p2Label.string = \"Black Lose!\";\r\n        this.p1Label.string = \"White Win!\";\r\n        this.restart.active = true;\r\n    },\r\n    p2Win() {\r\n        this.buttonUp.active = false;\r\n        this.buttonDown.active = false;\r\n        this.sliceDown.active = false;\r\n        this.sliceUp.active = false;\r\n        this.p2Label.string = \"Black Win!\";\r\n        this.p1Label.string = \"White Lose!\";\r\n        this.restart.active = true;\r\n    },\r\n    openP2() {\r\n        this.unschedule(this.timeInterval);\r\n        if(this.gameP2.gameOver == false) this.p2Win();\r\n        else this.p1Win();\r\n    },\r\n    openP1() {\r\n        this.unschedule(this.timeInterval);\r\n        if(this.gameP1.gameOver == false) this.p1Win();\r\n        else this.p2Win();\r\n    },\r\n    reloadScene() {\r\n        cc.director.loadScene(\"Game\");\r\n    },\r\n    destroyIndex(index) {\r\n        this.gameP1.positionList[index].number = 0;\r\n        if(this.gameP1.moveableList[index] != null)  {\r\n            this.gameP1.moveableList[index].destroy();\r\n            this.gameP1.moveableList[index] = null;\r\n            //this.gameP1.randomCreate();\r\n        }\r\n\r\n        this.gameP2.positionList[index].number = 0;\r\n        if(this.gameP2.moveableList[index] != null){\r\n            this.gameP2.moveableList[index].destroy();\r\n            this.gameP2.moveableList[index] = null;\r\n            //this.gameP2.randomCreate();\r\n        }\r\n        this.p1Bomb.bombIsOK = false;\r\n        this.p2Bomb.bombIsOK = false;\r\n    },\r\n\r\n    update (dt) {\r\n        this.stepCount = this.gameP1.stepCount;\r\n        if(this.timeCount >= 10) this.countDownLabel2.string = this.countDownLabel1.string = this.timeCount;\r\n            else this.countDownLabel2.string = this.countDownLabel1.string = \"0\" + this.timeCount;\r\n    },\r\n    clearStepCount() {\r\n        this.gameP1.stepCount = 0;\r\n        this.gameP2.stepCount = 0;\r\n        this.stepCount = 0;\r\n    },\r\n    timeInterval() {\r\n        this.timeCount -= 1;\r\n        //if(this.timeCount >= 10) this.countDownLabel2.string = this.countDownLabel1.string = this.timeCount;\r\n        //else this.countDownLabel2.string = this.countDownLabel1.string = \"0\" + this.timeCount;\r\n        if(this.timeCount <= 0) { \r\n            this.switchSide(); \r\n            \r\n        }\r\n    }\r\n});\r\n\r\nmodule.exports = VSController;\r\n"]}